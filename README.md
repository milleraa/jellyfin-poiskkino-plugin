# PoiskKino Metadata Plugin –¥–ª—è Jellyfin

–ü–ª–∞–≥–∏–Ω –¥–ª—è Jellyfin 10.9+, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —á–µ—Ä–µ–∑ API [–ü–æ–∏—Å–∫–ö–∏–Ω–æ](https://poiskkino.dev).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ñ–∏–ª—å–º–æ–≤ (IMovieMetadataProvider)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ (ISeriesMetadataProvider)
- ‚úÖ –†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, –æ–ø–∏—Å–∞–Ω–∏—è –∏ –∂–∞–Ω—Ä—ã
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥–∏ –ö–∏–Ω–æ–ü–æ–∏—Å–∫ –∏ IMDb
- ‚úÖ –ü–æ—Å—Ç–µ—Ä—ã –∏ —Ñ–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (IImageProvider)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ API (200 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å—É—Ç–∫–∏)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (403 Forbidden, 429 Too Many Requests, 404, —Ç–∞–π–º–∞—É—Ç—ã)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API-–∫–ª—é—á–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Jellyfin

## –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üî≤ –ü—Ä–æ–≤–∞–π–¥–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–µ—Ä—Å–æ–Ω (IPersonMetadataProvider)
  - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä—Å–æ–Ω (–∞–∫—Ç–µ—Ä—ã, —Ä–µ–∂–∏—Å—Å–µ—Ä—ã –∏ —Ç.–¥.)
  - –ë–∏–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  - –§–∏–ª—å–º–æ–≥—Ä–∞—Ñ–∏—è –∞–∫—Ç–µ—Ä–æ–≤
  - –ü–æ–∏—Å–∫ –ø–µ—Ä—Å–æ–Ω –ø–æ –∏–º–µ–Ω–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Jellyfin 10.9 –∏–ª–∏ –≤—ã—à–µ
- .NET 9

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   dotnet build -c Release
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (`PoiskKinoMetadataPlugin.dll`) –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤ Jellyfin:
   - Linux: `/var/lib/jellyfin/plugins/`
   - Windows: `%ProgramData%\Jellyfin\Server\plugins\`
   - Docker: `/config/plugins/`

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Jellyfin

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Dashboard** ‚Üí **Plugins** ‚Üí **PoiskKino Metadata**
2. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à API-–∫–ª—é—á –æ—Ç –ü–æ–∏—Å–∫–ö–∏–Ω–æ
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞

API-–∫–ª—é—á –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ [poiskkino.dev](https://poiskkino.dev). –î–µ–º–æ-–∫–ª—é—á –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 200 –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ —Å—É—Ç–∫–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
PoiskKinoMetadataPlugin/
‚îú‚îÄ‚îÄ PoiskKinoMetadataPlugin.cs      # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ø–ª–∞–≥–∏–Ω–∞ (BasePlugin)
‚îú‚îÄ‚îÄ Configuration.cs                # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞–≥–∏–Ω–∞ (API-–∫–ª—é—á)
‚îú‚îÄ‚îÄ ProviderNames.cs                # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–º–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ PoiskKinoApiClient.cs           # HTTP-–∫–ª–∏–µ–Ω—Ç —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îú‚îÄ‚îÄ PoiskKinoMovieProvider.cs       # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ñ–∏–ª—å–º–æ–≤
‚îú‚îÄ‚îÄ PoiskKinoSeriesProvider.cs      # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤
‚îú‚îÄ‚îÄ PoiskKinoSeasonProvider.cs      # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ–∑–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ PoiskKinoEpisodeProvider.cs     # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–ø–∏–∑–æ–¥–æ–≤
‚îú‚îÄ‚îÄ PoiskKinoImageProvider.cs       # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ø–æ—Å—Ç–µ—Ä—ã, —Ñ–æ–Ω—ã)
‚îú‚îÄ‚îÄ PoiskKinoExternalId.cs          # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –≤–Ω–µ—à–Ω–∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ Configuration/
‚îÇ   ‚îî‚îÄ‚îÄ configPage.html             # HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–ª–∞–≥–∏–Ω–∞
‚îî‚îÄ‚îÄ Models/
    ‚îú‚îÄ‚îÄ PoiskKinoCountry.cs
    ‚îú‚îÄ‚îÄ PoiskKinoEpisode.cs
    ‚îú‚îÄ‚îÄ PoiskKinoExternalId.cs
    ‚îú‚îÄ‚îÄ PoiskKinoGenre.cs
    ‚îú‚îÄ‚îÄ PoiskKinoImage.cs
    ‚îú‚îÄ‚îÄ PoiskKinoItem.cs
    ‚îú‚îÄ‚îÄ PoiskKinoMovieDtoV1_4.cs
    ‚îú‚îÄ‚îÄ PoiskKinoPerson.cs
    ‚îú‚îÄ‚îÄ PoiskKinoRating.cs
    ‚îú‚îÄ‚îÄ PoiskKinoSearchResponse.cs
    ‚îú‚îÄ‚îÄ PoiskKinoSeason.cs
    ‚îú‚îÄ‚îÄ PoiskKinoSeasonInfo.cs
    ‚îú‚îÄ‚îÄ PoiskKinoSeasonResponse.cs
    ‚îú‚îÄ‚îÄ PoiskKinoVideo.cs
    ‚îú‚îÄ‚îÄ PoiskKinoVideos.cs
    ‚îî‚îÄ‚îÄ PoiskKinoVotes.cs
```

## API –ü–æ–∏—Å–∫–ö–∏–Ω–æ

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: https://api.poiskkino.dev/documentation-json

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
```
GET https://api.poiskkino.dev/v1/search?query={title}&year={year}
Headers:
  X-API-KEY: –≤–∞—à_api_–∫–ª—é—á
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–ª–∞–≥–∏–Ω –∫—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –Ω–∞ 24 —á–∞—Å–∞ –ø–æ –∫–ª—é—á—É `–Ω–∞–∑–≤–∞–Ω–∏–µ:–≥–æ–¥` –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ 200 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- **403 Forbidden / 429 Too Many Requests**: –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ—Ç API (–ø—Ä–µ–≤—ã—à–µ–Ω —Å—É—Ç–æ—á–Ω—ã–π –ª–∏–º–∏—Ç)
- **404 Not Found**: –†–µ–∑—É–ª—å—Ç–∞—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 1 —á–∞—Å (—á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- **–¢–∞–π–º–∞—É—Ç—ã**: –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ –∫–ª–∞—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:
- `ConcurrentDictionary` –¥–ª—è –∫—ç—à–∞
- `SemaphoreSlim` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- `HttpClient` —á–µ—Ä–µ–∑ `IHttpClientFactory` (—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è Jellyfin)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `Jellyfin.Controller` (10.9.0)
- `Jellyfin.Model` (10.9.0)
- `Microsoft.Extensions.Http` (9.0.0)

### –°–±–æ—Ä–∫–∞

```bash
dotnet restore
dotnet build -c Release
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–ª–∞–≥–∏–Ω –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ, —Ä–∞–∑–º–µ—Å—Ç–∏–≤ DLL –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ Jellyfin –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–≤ —Å–µ—Ä–≤–µ—Ä.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –°—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Jellyfin –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤](https://docs.jellyfin.org/general/plugin/)
- [–®–∞–±–ª–æ–Ω –ø–ª–∞–≥–∏–Ω–∞ Jellyfin](https://github.com/jellyfin/jellyfin-plugin-template)
- [–ü—Ä–∏–º–µ—Ä –ø–ª–∞–≥–∏–Ω–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (AniList)](https://github.com/jellyfin/jellyfin-plugin-anilist)
- [API –ü–æ–∏—Å–∫–ö–∏–Ω–æ](https://api.poiskkino.dev/documentation-json)

